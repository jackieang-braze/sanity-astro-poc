---
import BareLayout from '../../../layouts/BareLayout.astro'
import { getPages, getPage, getExams } from '@lib/sanity'
import type { InferGetStaticParamsType } from 'astro'
import CertExamSection from '@components/CertExamSection.astro'
import Heading from '@components/atoms/Heading.astro'
import SquiggleSection from '@components/molecules/SquiggleSection.astro'
import Text from '@components/atoms/Text.astro'
import Section from '@components/atoms/Section.astro'
import Container from '@components/atoms/Container.astro'
import Flex from '@components/atoms/Flex.astro'
import Link from '@components/atoms/Link.astro'
import Grid from '@components/atoms/Grid.astro'
import AnnouncementBanner from '@components/molecules/AnnouncementBanner.astro'
import CourseCard from '@components/molecules/CourseCard.astro'
import CourseCardGrid from '@components/molecules/CourseCardGrid.astro'
import FAQSection from '@components/molecules/FAQ/FAQSection.astro'
import FAQDetail from '@components/molecules/FAQ/FAQDetail.astro'
import HeadingGroup from '@components/molecules/HeadingGroup.astro'
import type { CertificationExam, ModuleReference } from '@lib/sanity'
import { getExamViaID } from '@lib/sanity'

const page = await getPage('certification-page')
let content: CertificationExam[] = []
async function fetchContent() {
  for (let item of page.content) {
    content.push(await getExamViaID(item._ref))
  }
}
await fetchContent()
---

<BareLayout>
  {/*Squiggle Section */}
  <SquiggleSection
    bgColor='white'
    bgImage='certification-squiggle'
    paddingY='lg'
  >
    <Flex
      direction='column'
      gap='var(--space-md)'
    >
      <Flex
        direction='column'
        gap='1rem'
      >
        <Text
          weight={600}
          size='md'
        >
          Hero Eyebrow
        </Text>
        <Heading size='d2'>Hero Heading</Heading>
        <Text size='lg'>Hero subheading</Text>
      </Flex>
      <Flex
        gap='var(--space-sm)'
        direction='row'
      >
        <Link
          variant='primary'
          size='sm'
          href='https://www.google.com'
          arrow
          icon='calendar_today'
        >
          Hero CTA1
        </Link>
        <Link
          variant='primary'
          size='sm'
          href='#faq'
          arrow
          icon='help'
        >
          Hero CTA2
        </Link>
      </Flex>
    </Flex>
  </SquiggleSection>
  {/*Announcement Banner*/}

  <Section>
    <Container width='md'>
      <AnnouncementBanner
        bgColor='blue-50'
        bgImg='directory'
        heading='Banner heading'
        subheading='Banner subheading'
        cta='Banner CTA'
        url='https://www.google.com'
        linkVariant='tertiary'
        status='New!'
        overrideText={page.title ? page.title : undefined}
      />
    </Container>
  </Section>
  {/*Exam Sections*/}
  <Section paddingY='lg'>
    <Container width='md'>
      <CertExamSection
        heading='exams'
        subheading='subheading'
        pageExams={content}
      />
    </Container>
  </Section>
  {/*Testimonials*/}
  {/*FAQs*/}
  {/*Banner*/}
  {/*Squiggle Section */}
</BareLayout>
